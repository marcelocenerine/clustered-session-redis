apply plugin: 'docker'

buildscript {
    repositories {
        mavenCentral()
    }

    dependencies {
        classpath 'se.transmode.gradle:gradle-docker:1.2'
    }
}

task copyJar(dependsOn: ':sample-app:build', type: Copy) { 
    from tasks.getByPath(':sample-app:jar')
    into "$buildDir/image"
}

task buildImage(dependsOn: copyJar, type: Docker) {
    dockerfile = file('./Dockerfile')
    tag = 'marcelocenerine/sample-app'
    tagVersion = 'latest'
    stageDir = file("$buildDir/image")
}
